# Apark.
# Este script fue desarrollado para chequear en que ROM trabaja
# una rutina ASM.

const GET_INFO_ROM = 0x800141441;
const INFO_ROM_FIRERED_LEAFGREEN = 0x8000233AF;
const INFO_ROM_EMERALD = 0x8000233BF;

script main
	# ahora lo que hacemos es llamar a la rutina 'GET_INFO_ROM'
	callasm(GET_INFO_ROM);
	# Ahora la información se encuentra almacenada en la variable
	# info_rom.
	var info_rom: int at 0x8024; # la rutina guarda los valores en esta variable.
	# ahora bien, solo tenemos que chequear los valores de la rutina:
	match info_rom
		case 1 or 2 # la ROM es firered o leafgreen
			msg("detected FireRed/LeafGreen. Running respective script");
			callasm(INFO_ROM_FIRERED_LEAFGREEN);
		end
		case 3 or 4 # Ruby/Sapphire. El soporte para estos no está terminado.
			msg("Not supported. Coming soon.");
		end
		case 5 # Emerald.
			callasm(INFO_ROM_EMERALD);
		end
		else
		# es dudoso que lleguemos hasta acá. si ninguna de los anteriores
		# funcionó, entonces la rutina GET_INFO_ROM está mal.
			msg("[match.info_rom.else] La rutina no ha podido detectar tu ROM.\n"
				"Posiblemente un bug ha ocurrido. Reporta por favor.");
		end
	end
end

# Aquí abajo tenemos un trozo de script de XSE. Desarrollado para testear el carajo este.
# Para utilizar el raw necesitamos declarar el script 'main_sup'
extern script main_sup;
raw
	"#org @main_sup
	msbgox @msg_sup 0x2
	end
	
	#org @msg_sup
	= Main Sup"
end

